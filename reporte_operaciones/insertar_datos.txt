CREATE DEFINER=`solarity`@`%` PROCEDURE `Solarity`.`test_insertarDatosIniciales`(
    IN _plantas VARCHAR(1024)
)
BEGIN
    INSERT INTO tmp_reporte_operaciones
    SELECT
        NULL,
        planta.nombre,
        COALESCE(cliente.nombre, 'Sin definir'),
        API,
        planta.id,
        latitud,
        longitud,
        potencia,
        inicioGeneracion,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
    FROM planta
    LEFT JOIN cliente ON planta.id_cliente = cliente.id
    WHERE 
        ((_plantas = 'Todas' AND planta.subEtapa = 'Operaci√≥n') 
        OR (_plantas <> 'Todas' AND FIND_IN_SET(planta.id, _plantas)))
        AND planta.inicioGeneracion IS NOT NULL;
END